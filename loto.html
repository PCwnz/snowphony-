<html><head><base href="https://game"/><meta charset="UTF-8"><title>Magical Lotto Adventure</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sankofa+Display&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Ga+Maamli&family=Sankofa+Display&display=swap" rel="stylesheet">
    <style>
        body {
        font-family: "Sankofa Display", sans-serif;
        font-weight: 400;
        font-style: normal;
        display: flex;
        flex-direction: column;
        align-items: center;
        background: 
          radial-gradient(circle at 20% 20%, #32cd32 0%, transparent 40%),
          radial-gradient(circle at 80% 80%, #ffd700 0%, transparent 40%),     
          linear-gradient(135deg, #0a4d1c, #2e8b57, #0a4d1c);
        color: white;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
        overflow-x: hidden;
        position: relative;
        }

    
    .title {
        color: #f5ed05;
        text-shadow: 0 0 10px #4a9c4f, 0 0 20px #f4e285;
        font-size: 3.5em;
        margin: 20px;
        animation: magicalGlow 3s ease-in-out infinite;
        text-align: center;
        position: relative;
    }
    
    @keyframes magicalGlow {
        0% { transform: scale(1); text-shadow: 0 0 10px #4a9c4f, 0 0 20px #f4e285; }
        50% { transform: scale(1.05); text-shadow: 0 0 30px #4a9c4f, 0 0 40px #f4e285, 0 0 50px #fff; }
        100% { transform: scale(1); text-shadow: 0 0 10px #4a9c4f, 0 0 20px #f4e285; }
    }
    
    .background-animation {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
        overflow: hidden;
        background:radial-gradient(circle at 20% 20%, #32cd32 0%, transparent 40%),
        radial-gradient(circle at 80% 80%, #ffd700 0%, transparent 40%), 
        linear-gradient(135deg, #0a4d1c, #2e8b57, #0a4d1c);
    }
    
    .flying-star {
        position: absolute;
        width: 25px;
        height: 25px;
        background: rgba(244, 226, 133, 0.7);
        clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        animation: fly 10s linear infinite;
        filter: drop-shadow(0 0 5px #f4e285);
    }
    
    .fairy {
        position: absolute;
        width: 15px;
        height: 15px;
        background: rgba(244, 226, 133, 0.9);
        border-radius: 50%;
        filter: blur(2px);
        box-shadow: 0 0 10px #f4e285, 0 0 20px #4a9c4f;
        animation: fairyFly 15s linear infinite;
        pointer-events: none;
        z-index: 1;
    }
    
    .fairy::after {
        content: '*v* *v*';
        font-family: monospace; /* Ch·ªçn font monospace */
        position: absolute;
        width: 100%;
        height: 100%;
        background: rgba(59, 224, 128, 0.5);
        border-radius: 50%;
        filter: blur(5px);
        animation: fairyGlow 2s ease-in-out infinite;
    }
    
    @keyframes fairyGlow {
        0%, 100% { transform: scale(1); opacity: 0.5; }
        50% { transform: scale(1.5); opacity: 1; }
    }
    
    @keyframes fairyFly {
        0% { transform: translate(0, 0) scale(1); opacity: 0; }
        20% { opacity: 1; }
        80% { opacity: 1; }
        100% { transform: translate(100vw, -50vh) scale(0.2) rotate(360deg); opacity: 0; }
    }
    
    @keyframes fly {
        0% { transform: translate(-100px, -100px) rotate(0deg); opacity: 0; }
        50% { opacity: 1; }
        100% { transform: translate(120vw, 120vh) rotate(720deg); opacity: 0; }
    }
    
    .container {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
    margin: 20px auto;
    border: 2px solid #ffd700;
    max-width: 90%;
    text-align: center;
    }
    
    #tables {
        display: flex;
        flex-direction: column;
        gap: 30px;
        align-items: center;
        width: 100%;
    }
    
    table {
        border-collapse: collapse;
        margin: 0 auto;
        background: rgba(126, 223, 129, 0.9);
        transform: rotateX(5deg);
        transition: transform 0.3s;
        width: auto;
    }
    
    td {
        font-family: "Ga Maamli", sans-serif;
        font-weight: 400;
        font-style: normal;
        width: 60px;
        height: 60px;
        text-align: center;
        border: 2px solid #4a9c4f;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: bold;
        color: #0b3c17;
        font-size: 1.2em;
    }
    
    td.selected {
     background: #02ef0a;
    color: rgb(247, 231, 9);
    transform: scale(1.1);
    box-shadow: 0 0 10px #a0eb0a;
    animation: pulse 1s infinite;
    }
    
    td.empty {
        background-color: rgba(5, 48, 6, 0.5);
    }
    
    .win-animation {
        animation: celebrate 1.5s ease-in-out infinite;
    }
    
    @keyframes celebrate {
        0% { transform: rotate(-2deg) scale(1); }
        50% { transform: rotate(2deg) scale(1.1); }
        100% { transform: rotate(-2deg) scale(1); }
    }
    
    .congratulations {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(10, 45, 11, 0.95);
        padding: 50px;
        border-radius: 20px;
        text-align: center;
        color: #f4e285;
        font-size: 36px;
        z-index: 1000;
        box-shadow: 0 0 100px rgba(244, 226, 133, 0.6);
        animation: magicalAppear 0.5s ease-out, float 3s ease-in-out infinite;
        border: 3px solid #4a9c4f;
    }
    
    .congratulations::before,
    .congratulations::after {
        content: 'üå§Ô∏è';
        font-family: monospace; /* Ch·ªçn font monospace */
        position: absolute;
        font-size: 48px;
        animation: fairyDance 4s infinite linear;
        animation: fly 10s linear infinite;
    }
    
    .congratulations::before {
        left: -30px;
        top: 50%;
        animation-delay: -2s;
    }
    
    .congratulations::after {
        right: -30px;
        top: 50%;
    }
    
    @keyframes fairyDance {
        0% { transform: translate(0, -20px) rotate(0deg); }
        50% { transform: translate(0, 20px) rotate(180deg); }
        100% { transform: translate(0, -20px) rotate(360deg); }
    }
    
    @keyframes magicalAppear {
        0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
        100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }
    
    @keyframes float {
        0%, 100% { transform: translate(-50%, -50%); }
        50% { transform: translate(-50%, -55%); }
    }
    @keyframes fly {
    0% { transform: translate(-100vw, 50vh) rotate(0deg); }
    100% { transform: translate(100vw, 50vh) rotate(360deg); }
  }
    .fairy-trail {
        position: absolute;
        width: 3px;
        height: 3px;
        background: rgba(244, 226, 133, 0.6);
        border-radius: 50%;
        filter: blur(1px);
        animation: fadeOut 1s linear forwards;
    }
    
    @keyframes fadeOut {
        0% { opacity: 0.6; }
        100% { opacity: 0; }
    }
    
    #resetButton {
    background: linear-gradient(45deg, #32cd32, #ffd700);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-family: "Sankofa Display", serif;
    font-weight: 400;
    font-style: normal;
    font-size: 16px;
    margin: 10px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    font-weight: bold;
    box-shadow: 0 4px 15px rgba(50, 205, 50, 0.3);
    }
    
    #resetButton:hover {
        background: #3d8141;
        transform: scale(1.05) rotate(-2deg);
    box-shadow: 0 6px 20px rgba(50, 205, 50, 0.5);
    }
    
    .title::before, .title::after {
        content: "üåü";
        position: absolute;
        font-size: 0.5em;
        animation: flyAround 4s infinite linear;
    }
    
    .title::before {
        left: -40px;
        animation-delay: -2s;
    }
    
    .title::after {
        right: -40px;
    }
    
    @keyframes flyAround {
        0% { transform: translate(0, 0) rotate(0deg); }
        50% { transform: translate(10px, -10px) rotate(180deg); }
        100% { transform: translate(0, 0) rotate(360deg); }
    }
    .floating-items {
    position: fixed;
    pointer-events: none;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
  }

  .floating-item {
    position: absolute;
    animation: float-around 30s linear infinite;
    opacity: 0.9;
  }

  @keyframes float-around {
    0% { transform: translate(0, 0) rotate(0deg); }
    100% { transform: translate(100vw, -100vh) rotate(360deg); }
  }
  .close-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    font-size: 24px;
    color: #ffd700;
    cursor: pointer;
    font-weight: bold;
    z-index: 1001;
    text-shadow: 0 0 10px #f4e285, 0 0 20px #ffd700;
    transition: transform 0.2s ease, color 0.2s ease;
}

.close-btn:hover {
    transform: scale(1.2);
    color: #ffffff;
    text-shadow: 0 0 20px #fff, 0 0 40px #ffd700;
}

    </style>
    </head>
    <body>
        <div class="floating-items">
            <div class="floating-item" style="top: 10%; left: 10%;">üßö‚Äç‚ôÇÔ∏è</div>
            <div class="floating-item" style="top: 30%; left: 80%;">üåü</div>
            <div class="floating-item" style="top: 70%; left: 20%;">üçÑ</div>
            <div class="floating-item" style="top: 50%; left: 60%;">üåà</div>
            <div class="floating-item" style="top: 50%; left: 60%;">üíì</div>
            <div class="floating-item" style="top: 50%; left: 60%;">üíÉ</div>
            <div class="floating-item" style="top: 50%; left: 60%;">üëÄ</div>
            <div class="floating-item" style="top: 50%; left: 60%;">üå∫</div>
            <div class="floating-item" style="top: 50%; left: 60%;">üí´</div>
          </div> 
          <h1 class="title">üåüSNOWPHONY LOTOüåü</h1>
          <h3 class="title">‚òÄÔ∏è CS0001</h3>
    <div class="background-animation"></div>
    <div class="container">
        <div id="tables"></div>
        <button id="resetButton">Ch∆°i l·∫°i üåû </button>
    </div>
    <div class="congratulations">
        <button class ="close-btn" onclick="closeWinScreen()">√ó</button>
        ‚òÄÔ∏èüí• SNOWER KING!‚òÄÔ∏èüí•<br>
        üåû M·ª´ng ng∆∞·ªùi ·∫•y ƒë√£ kinh<br>
        <button id="resetButton"> ƒÇn m·ª´ng n√†o r·ªìi m√¨nh ch∆°i n·ªØa nh√© üåû </button>
    </div>
    
    <audio id="fairySound">
        <source src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAUAAAyQABAQEBAQEBAQEBQUFBQUFBQUFBgYGBgYGBgYGBwcHBwcHBwcHCAgICAgICAgICQkJCQkJCQkJCgoKCgoKCgoKCwsLCwsLCwsLDAwMDAwMDAwMDQ0NDQ0NDQ0NDg4ODg4ODg4OD///8AAAAATGF2YzU4LjU0AAAAAAAAAAAAAAAAJAZAAAAAAAAAMkDc7U9JAAAAAAAAAAAAAAAAAAAA//sQxAADwAABpAAAACAAADSAAAAETEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=" type="audio/mpeg">
    </audio>
    
    <script>
    function createStars() {
        const container = document.querySelector('.background-animation');
        for (let i = 0; i < 20; i++) {
            const star = document.createElement('div');
            star.className = 'flying-star';
            star.style.left = Math.random() * 100 + 'vw';
            star.style.top = Math.random() * 100 + 'vh';
            star.style.animationDelay = Math.random() * 10 + 's';
            container.appendChild(star);
            
            const fairy = document.createElement('div');
            fairy.className = 'fairy';
            fairy.style.left = Math.random() * 100 + 'vw';
            fairy.style.top = Math.random() * 100 + 'vh';
            fairy.style.animationDelay = Math.random() * 15 + 's';
            container.appendChild(fairy);
            
            // Add trail effect
            setInterval(() => createFairyTrail(fairy), 100);
        }
    }
    
    function createFairyTrail(fairy) {
        const trail = document.createElement('div');
        trail.className = 'fairy-trail';
        trail.style.left = fairy.offsetLeft + 'px';
        trail.style.top = fairy.offsetTop + 'px';
        document.querySelector('.background-animation').appendChild(trail);
        
        setTimeout(() => trail.remove(), 1000);
    }
    
    function playFairySound() {
        const sound = document.getElementById('fairySound');
        sound.play().catch(e => console.log("Audio play failed:", e));
    }
    
    function generateNumbers() {
        // Create pools of numbers for each column with proper ranges
        let columnPools = [
            Array.from({length: 9}, (_, i) => i + 1),         // 1-9
            Array.from({length: 10}, (_, i) => i + 10),       // 10-19
            Array.from({length: 10}, (_, i) => i + 20),       // 20-29
            Array.from({length: 10}, (_, i) => i + 30),       // 30-39
            Array.from({length: 10}, (_, i) => i + 40),       // 40-49
            Array.from({length: 11}, (_, i) => i + 50)        // 50-60
        ];
    
        // Initialize all tables
        let tables = [
            Array(6).fill().map(() => Array(6).fill(null)),
            Array(6).fill().map(() => Array(6).fill(null)),
            Array(3).fill().map(() => Array(6).fill(null))
        ];
    
        // First ensure at least one number per column across all tables
        columnPools.forEach((pool, colIndex) => {
            // For each column, distribute at least one number to each table
            tables.forEach((table, tableIndex) => {
                let placed = false;
                while (!placed) {
                    // Try to place in random row
                    let rowIndex = Math.floor(Math.random() * table.length);
                    // Count numbers in this row
                    let numbersInRow = table[rowIndex].filter(cell => cell !== null).length;
                    
                    if (numbersInRow < 4) {
                        // Get a random number from the pool
                        let randNumIndex = Math.floor(Math.random() * pool.length);
                        let number = pool.splice(randNumIndex, 1)[0];
                        
                        // Place the number
                        table[rowIndex][colIndex] = number;
                        placed = true;
                    }
                }
            });
        });
    
        // Then fill remaining spots ensuring exactly 4 numbers per row
        tables.forEach((table, tableIndex) => {
            table.forEach((row, rowIndex) => {
                // Count how many numbers are already in this row
                let numbersInRow = row.filter(cell => cell !== null).length;
                
                // Calculate how many more numbers we need to add (should add up to exactly 4)
                let numbersToAdd = 4 - numbersInRow;
                
                // Get available columns (those that are still null)
                let availableColumns = row.map((cell, index) => cell === null ? index : -1)
                                        .filter(index => index !== -1);
                
                // Randomly select columns to fill
                while (numbersToAdd > 0 && availableColumns.length > 0) {
                    // Pick a random available column
                    let randomColIndex = Math.floor(Math.random() * availableColumns.length);
                    let colIndex = availableColumns[randomColIndex];
                    availableColumns.splice(randomColIndex, 1);
    
                    // If there are still numbers available in this column's pool
                    if (columnPools[colIndex] && columnPools[colIndex].length > 0) {
                        // Get a random number from the pool
                        let randNumIndex = Math.floor(Math.random() * columnPools[colIndex].length);
                        let number = columnPools[colIndex].splice(randNumIndex, 1)[0];
                        
                        // Place the number
                        table[rowIndex][colIndex] = number;
                        numbersToAdd--;
                    }
                }
            });
        });
    
        // Validate the generated tables
        const isValid = validateTables(tables);
        if (!isValid) {
            // If not valid, generate new tables
            return generateNumbers();
        }
    
        return tables;
    }
    
    function validateTables(tables) {
        // Check all conditions
        
        // 1. Each row must have exactly 4 numbers
        for (let table of tables) {
            for (let row of table) {
                const numbersInRow = row.filter(cell => cell !== null).length;
                if (numbersInRow !== 4) return false;
            }
        }
    
        // 2. Each column must have at least 1 number
        for (let colIndex = 0; colIndex < 6; colIndex++) {
            let hasNumber = false;
            for (let table of tables) {
                for (let row of table) {
                    if (row[colIndex] !== null) {
                        hasNumber = true;
                        break;
                    }
                }
                if (hasNumber) break;
            }
            if (!hasNumber) return false;
        }
    
        // 3. Check number ranges for each column
        const ranges = [
            {min: 1, max: 9},
            {min: 10, max: 19},
            {min: 20, max: 29},
            {min: 30, max: 39},
            {min: 40, max: 49},
            {min: 50, max: 60}
        ];
    
        for (let table of tables) {
            for (let row of table) {
                for (let colIndex = 0; colIndex < 6; colIndex++) {
                    const number = row[colIndex];
                    if (number !== null) {
                        if (number < ranges[colIndex].min || number > ranges[colIndex].max) {
                            return false;
                        }
                    }
                }
            }
        }
    
        // 4. Check for duplicates
        const allNumbers = new Set();
        for (let table of tables) {
            for (let row of table) {
                for (let number of row) {
                    if (number !== null) {
                        if (allNumbers.has(number)) return false;
                        allNumbers.add(number);
                    }
                }
            }
        }
    
        return true;
    }
    
    function createTables() {
        const tables = generateNumbers();
        const tablesDiv = document.getElementById('tables');
        tablesDiv.innerHTML = '';
        
        tables.forEach((tableData) => {
            const table = document.createElement('table');
            tableData.forEach(row => {
                const tr = document.createElement('tr');
                row.forEach(cell => {
                    const td = document.createElement('td');
                    if (cell !== null) {
                        td.textContent = cell;
                        td.addEventListener('click', () => toggleCell(td));
                    } else {
                        td.classList.add('empty');
                    }
                    tr.appendChild(td);
                });
                table.appendChild(tr);
            });
            tablesDiv.appendChild(table);
        });
    }
    
    function toggleCell(cell) {
        cell.classList.toggle('selected');
        playFairySound();
        checkWin();
    }
    
    function checkWin() {
        const tables = document.getElementsByTagName('table');
        for (let table of tables) {
            const rows = table.getElementsByTagName('tr');
            for (let row of rows) {
                const cells = row.getElementsByTagName('td');
                let selectedCount = 0;
                let totalNumbers = 0;
                
                for (let cell of cells) {
                    if (!cell.classList.contains('empty')) {
                        totalNumbers++;
                        if (cell.classList.contains('selected')) {
                            selectedCount++;
                        }
                    }
                }
                
                if (totalNumbers > 0 && selectedCount === totalNumbers) {
                    showCongratulations();
                    return;
                }
            }
        }
    }
    
    function showCongratulations() {
        const congrats = document.querySelector('.congratulations');
        congrats.style.display = 'block';
        document.querySelectorAll('table').forEach(table => {
            table.classList.add('win-animation');
        });
    }
    function closeWinScreen() {
        const congrats = document.querySelector('.congratulations');
        congrats.remove('.congratulations');
        };

    
    function resetGame() {
        createTables();
        document.querySelector('.congratulations').style.display = 'none';
        document.querySelectorAll('table').forEach(table => {
            table.classList.remove('win-animation');
        checkWin;
        showCongratulations;
    
        });
    }
    
    document.getElementById('resetButton').addEventListener('click', resetGame);
    
    // Initialize the game
    createStars();
    createTables();
    </script>
    </body></html>